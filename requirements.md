# AI图片库网站需求文档

# AI图片库网站需求文档

## 一、网站基础信息

1. 网站名称：AI图片库（AI Image Gallery）

2. 核心目标：展示各类人工智能（AI）生成的图片及视频，支持用户查看文件详情并下载原始文件（图片/视频）

## 二、核心功能模块

### （一）首页布局

1. 顶部导航栏

a. 布局规则：固定在页面顶部，采用左右分布结构

b. 左侧区域：展示网站Logo

c. 右侧区域：用户登录/状态入口

ⅰ. 未登录状态：仅显示“登录”按钮（供普通用户及管理员通用）

- 点击“登录”按钮弹出登录弹窗，仅支持谷歌账号（Google Account）登录

- 点击“登录”按钮弹出统一登录弹窗，支持用户名/密码验证；系统根据账号类型自动识别为普通用户或管理员账号

ⅱ. 普通用户已登录状态：显示用户头像

- 点击头像弹出“退出登录”按钮

- 点击“退出登录”后切换至未登录状态

ⅲ. 管理员已登录状态：显示管理员头像

- 点击头像弹出“管理员退出登录”按钮

- 点击“管理员退出登录”后切换至未登录状态

1. 核心内容区：位于顶部导航栏下方，以瀑布流布局展示AI生成的图片及视频

### （二）首页图片及视频展示规则

1. 布局方式：采用瀑布流布局，可自动适配不同屏幕尺寸，图片与视频排列紧凑，无过多留白

2. 缩略图要求：

a. 图片：每张图片以缩略图形式呈现，保持原始宽高比，不拉伸、不变形，分辨率设置为800×任意尺寸（按比例缩放）

b. 视频：每个视频以缩略图形式呈现（采用视频首帧），保持原始宽高比，不拉伸、不变形，分辨率设置为800×任意尺寸（按比例缩放）

1. 加载机制：实现懒加载功能，优先加载首屏图片及视频，当用户滚动至可视区域时再加载对应文件

2. 加载状态提示：

a. 加载中：显示与文件类型匹配的占位符（模糊的低清预览图/视频帧或加载动画）

b. 加载失败：显示“加载失败，点击重试”按钮（图片与视频统一使用该提示）

1. 视频播放逻辑：

a. 自动播放触发：当用户鼠标hover到视频组件区域，且hover时间超过0.2秒时，视频自动开始播放（默认静音）

b. 暂停触发：当用户鼠标移出视频组件区域时，视频自动暂停

c. 循环播放：视频播放结束后自动重新开始，持续循环播放，直至鼠标移出组件区域

### （三）文件详情弹窗（图片/视频通用）

1. 触发逻辑：用户点击图片/视频缩略图时弹出弹窗；页面底层添加半透明遮罩（禁止滚动）；弹窗先加载文件占位符，避免出现空白区域

2. 弹窗结构

a. 左侧：文件展示区（尺寸固定，文件自适应展示区域，显示高清原始文件：图片直接展示，视频默认静音播放）

b. 右侧：信息+操作区域

ⅰ. 上方信息区

- 模型信息：标注为“模型：XXX”（示例：模型：Gemini 3 Pro）

- 提示词信息：标注为“提示词：”+完整提示词内容；当内容过长时支持折叠/展开（由用户点击控制）

- 参考图参数：若后端文件数据包含参考图参数，则显示此项（标注为“参考图：”）；参数下方展示对应的参考图缩略图（支持多张参考图）。鼠标悬停在参考图缩略图上时，缩略图下方弹出悬浮窗展示对应图片；鼠标移开后悬浮窗消失。

ⅱ. 下方操作区：仅保留“下载”按钮；点击按钮直接下载原始文件（图片/视频）

1. 关闭逻辑：

a. 点击背景半透明遮罩可关闭弹窗

b. 关闭后页面底层恢复滚动功能

## 三、后端逻辑

### 1. 数据存储

#### 1.1 图片及视频文件存储

- 将AI生成的原始图片/视频与自动生成的缩略图（图片：直接生成缩略图；视频：提取首帧作为缩略图）分开存储；支持常见图片格式（JPG、PNG、WebP等）及视频格式（MP4、WebM等）。

- 采用分布式文件存储或云存储服务（如亚马逊AWS S3、阿里云OSS），确保数据可靠性及可扩展性。

- 在数据库中记录每个文件的存储路径、文件大小、格式、文件类型（图片/视频）、访问链接及视频专属元数据（时长、分辨率等），以便快速检索。

#### 1.2 图片及视频元数据存储

- 建立专用数据库表存储文件相关信息，包括：文件唯一ID（主键）、AI模型名称、生成提示词、参考图ID（多张参考图时用逗号分隔多个ID）、生成时间、上传时间、关联用户ID（针对上传文件的已登录用户）、文件类型（图片/视频）、发布状态（未发布/已发布）及视频专属元数据（时长、分辨率等）。

- 参考图信息存储在独立的关联表中，包含参考图ID、存储路径、访问链接及对应目标文件ID（与主文件表通过外键关联）。

#### 1.3 用户及管理员数据存储

- **普通用户数据**：存储通过谷歌账号验证获取的基础用户信息，包括用户ID（唯一标识）、用户名、头像链接及登录状态过期时间。

- **管理员用户数据**：在专用数据库表中存储管理员账户信息，包括管理员ID（唯一标识）、用户名、加密密码（采用bcrypt等安全加密算法）、账户状态（启用/禁用）及最后登录时间。

### 2. API接口设计

#### 2.1 图片及视频列表获取接口

- 请求方式：GET

- 请求参数：页码（默认1）、每页文件数量（默认20）、屏幕尺寸（可选，用于自适应缩略图尺寸）。

- 返回内容：文件元数据列表（包含文件ID、缩略图链接、AI模型名称、文件类型）、文件总数及是否存在下一页（用于支持懒加载）。

#### 2.2 图片及视频详情获取接口

- 请求方式：GET

- 请求参数：文件ID（必填）。

- 返回内容：完整文件元数据（模型名称、完整提示词、上传时间、文件类型、视频专属元数据*若有*）、原始文件链接（图片：原始图片链接；视频：原始视频链接）、参考图列表（包含参考图缩略图链接及完整图片链接，仅当存在参考图参数时返回）。

#### 2.3 文件下载接口

- 请求方式：GET

- 请求参数：文件ID（必填）、文件类型（原始文件/缩略图，默认原始文件）。

- 返回内容：文件流（图片/视频文件流，支持浏览器直接下载）。

#### 2.4 用户验证接口（普通用户）

- 请求方式：POST

- 请求参数：谷歌账号验证令牌（由前端获取）。

- 返回内容：用户验证结果（成功/失败）；验证成功时返回用户信息（ID、姓名、头像链接）及临时登录令牌（有效期24小时）。

#### 2.5 管理员验证接口

- 请求方式：POST

- 请求参数：用户名、加密密码。

- 返回内容：管理员验证结果（成功/失败）；验证成功时返回管理员信息（ID、用户名、头像链接）及临时登录令牌（有效期24小时）。

#### 2.6 管理员历史作品获取接口

- 请求方式：GET

- 请求参数：管理员ID（必填）、文件类型（可选：图片/视频/全部，默认全部）、模型名称（可选）、页码（默认1）、每页文件数量（默认20）。

- 返回内容：历史作品元数据列表（包含文件ID、缩略图链接、AI模型名称、文件类型、发布状态）、作品总数及是否存在下一页。

### 3. 数据处理逻辑

#### 3.1 文件处理

- 接收AI生成文件（图片/视频）及其元数据后，通过文件处理库自动生成缩略图（图片：800×按比例缩放尺寸；视频：首帧缩略图，800×按比例缩放尺寸），并将原始文件与缩略图存储至对应存储区域。

- 处理视频文件时，额外提取元数据（时长、分辨率）并存储至数据库。

- 对于包含参考图参数的文件，通过参考图ID建立参考图与目标文件的关联，并验证参考图有效性（文件是否存在、格式是否支持）。

- 新生成作品默认初始发布状态为“未发布”，仅管理员可在历史作品页面操作修改发布状态。

#### 3.2 数据验证

- 接收文件元数据时验证其完整性：必填字段（文件ID、AI模型名称、提示词、文件类型）不可为空；验证文件格式及大小（拒绝超过50MB的图片/视频）。

- 登录时验证谷歌验证令牌（普通用户）及用户名/密码（管理员）的有效性，拒绝无效或过期凭证。

#### 3.3 性能优化

- 通过内容分发网络（CDN）实现文件链接缓存，提升前端文件（尤其是缩略图、参考图及视频）的加载速度。

- 在数据库的文件ID、用户ID、管理员ID、上传时间及文件类型字段上建立索引，优化列表及详情接口的查询效率。

### 4. 安全性与可靠性

#### 4.1 访问控制

- 文件下载及详情接口无需用户登录即可访问，但管理员后台（包括管理员登录、历史作品页面及相关接口）仅支持已验证管理员用户访问。

- 限制API请求频率（如单IP每分钟最多100次请求），防止恶意请求攻击。

- 管理员账户创建权限仅限超级管理员或授权人员，避免未授权访问。

#### 4.2 数据备份

- 对文件（图片/视频）及数据库数据执行每日增量备份，每周执行全量备份，防止数据丢失。

- 设置文件存储容错机制（如多区域备份），确保单个存储节点故障时文件仍可正常访问。

## 四、设计风格

### 1. 核心设计原则

• 内容优先：以AI生成的图片和视频为视觉核心，减少冗余装饰元素，通过简洁布局突出文件细节。

• 简洁简约：采用简洁清晰的设计语言，避免复杂图案及杂乱色彩，让用户专注于内容本身，无视觉干扰。

• 视觉统一：统一全站功能组件（按钮、弹窗、字体、图标等）的风格，营造连贯的用户体验。

• 自适应美观：实现对不同设备（桌面端、平板、手机）的流畅适配，同时保持合理布局及视觉美感。

### 2. 首页设计风格

#### 顶部导航栏

- 风格：简洁扁平，无厚重装饰效果；滚动时灵活调整显示状态，既避免遮挡文件又确保可操作性。

- Logo：简洁易识别，配色与全站色调统一；尺寸适中，不突兀。

- “登录”/“管理员登录”/头像：按钮样式简洁易区分；头像以规则形状展示，鼠标悬停时有明显交互反馈。

#### 核心内容区（瀑布流布局）

- 文件间距：图片与视频之间保持统一合理的间距，实现紧凑且不拥挤的布局效果。

- 文件卡片：默认风格简洁；鼠标悬停时添加适度视觉反馈（如淡边框或阴影），增强交互性但不转移对内容的注意力。

- 加载占位符：使用与目标文件宽高比匹配的占位符，搭配简洁加载提示，避免空白区域造成的困惑。

- 视频组件风格：视频缩略图与图片卡片设计风格一致，不添加额外装饰元素；视频播放时不显示冗余控制按钮（仅依赖悬停/暂停逻辑），保持界面简洁。

### 3. 文件详情弹窗设计风格

#### 弹窗框架

- 整体风格：造型简洁，与背景区分清晰（如添加适当阴影），与全站风格统一。

- 遮罩层：采用半透明遮罩弱化背景，引导用户注意力聚焦至弹窗内容。

#### 左侧文件展示区

- 采用中性背景衬托文件，确保图片色彩真实呈现、视频播放流畅；展示区边界清晰，与其他区域无混淆。

#### 右侧信息+操作区域

- 布局：整齐有序，信息模块间距清晰，确保良好可读性。

- 文字风格：层级分明（如标签加粗、内容常规），字体大小舒适，颜色不刺眼。

- 参考图缩略图：与首页文件卡片风格一致，尺寸及间距统一，鼠标悬停时有明显交互反馈。

- 参考图悬浮窗：风格简洁，图片展示清晰，鼠标移开后快速隐藏，不干扰操作。

- 下载按钮：醒目易识别，鼠标悬停或点击时有明显交互反馈（如颜色变化），与其他功能按钮风格统一。

### 4. 视觉规范

• 色彩体系：为关键交互元素（如下载按钮）设定主色调，与全站色调协调；背景、文字及辅助元素采用一套协调的中性色，确保视觉和谐及可读性。

• 字体体系：选用易读字体，确保不同平台显示一致；明确区分不同文字层级（如页面标题与内容文字），形成清晰视觉层级。

• 图标风格：功能提示采用简洁直观的图标（包括图片/视频切换图标），与网站简约风格统一。

## 五、管理员后台

### （一）管理员账户管理

1. 账户创建与存储

a. 支持通过后端系统（如专用配置界面或API）手动创建管理员账号并保存至数据库，以唯一管理员ID作为标识主键，账号信息需包含管理员ID、用户名、加密密码、账户状态等核心字段。

b. 管理员账户数据存储在专用数据库表中，密码经过加密处理确保安全；仅超级管理员或授权人员可执行账户创建及修改操作。

c. 支持启用/禁用管理员账户，以控制访问权限。

1. 管理员登录/退出逻辑

a. 未登录状态：顶部导航栏右侧区域仅显示统一“登录”按钮，无单独“管理员登录”入口

b. 登录流程：点击“登录”按钮弹出统一登录弹窗，输入用户名及密码后提交验证；系统自动判断账号类型，若为管理员账号则登录后切换至管理员状态并显示专属功能，若为普通用户则切换至普通用户状态

c. 退出流程：点击顶部导航栏的管理员头像，弹出“管理员退出登录”按钮；点击后清除登录状态，返回未登录状态。

### （二）管理员首页顶部输入交互栏

1. 显示权限：仅管理员账号登录后可见；普通用户登录及未登录用户均无法看到该组件

2. 组件结构

a. 主体：文本输入框（用于输入提示词、关键词或查询内容），风格简约，与全站设计统一，支持输入内容的实时清空与编辑。

b. 左侧：图片和视频切换滑块

- 组成：两个直观图标（图片图标、视频图标），用于精准切换文件类型，图标样式与全站视觉规范统一。

- 状态切换：仅可选中一种类型，默认选中“图片”类型，选中状态与未选中状态有明确视觉区分（如选中状态用填充色+边框标识，未选中状态仅显示轮廓）。

- 视觉区分：选中图标用网站主色调高亮填充并添加边框，未选中图标用中性色仅显示轮廓，确保用户能快速识别当前选中类型。

c. 右侧：模型选择列表

- 默认显示：展示当前选中模型名称，最大显示长度限制为10个字符，超出部分自动截断并以省略号（“...”）代替，确保显示美观。

- 下拉功能：点击模型名称触发下拉列表展开，列表内展示所有符合当前文件类型的可用模型，支持单选操作，点击目标模型后列表自动收起并更新当前选中模型显示。

- 关联逻辑：模型选项与左侧切换滑块强关联，根据左侧选中的文件类型动态筛选可用模型，确保模型与文件类型匹配：

ⅰ. 左侧选中“图片”时：右侧模型列表仅显示支持图片生成的AI模型，隐藏所有视频专属模型。

ⅱ. 左侧选中“视频”时：右侧模型列表仅显示支持视频生成的AI模型，隐藏所有图片专属模型。

1. 交互逻辑

a. 类型-模型关联：切换左侧文件类型滑块时，右侧模型列表实时刷新，仅保留匹配当前类型的模型；若原选中模型与新类型不匹配，列表自动选中第一个可用模型并更新显示。

b. 确认与跳转：在文本输入框中输入内容并确认模型（或使用默认选中模型）后，点击输入框内置的确认图标（如“搜索”图标）或按下键盘回车键，立即跳转至“管理员历史作品页面”。

### （三）管理员历史作品页面

1. 访问控制：仅限已登录管理员访问；未授权访问（普通用户/未登录用户）将重定向至前端首页。

2. 布局设计

a. 顶部区域：完整保留管理员首页顶部所有样式，包括导航栏、管理员头像展示及输入交互栏，布局、风格、交互逻辑均不改变，确保操作连贯性；输入交互栏中保留用户跳转前的输入内容及模型选择状态，支持二次编辑与查询。

b. 核心内容区：采用与前端首页一致的瀑布流布局，确保视觉统一。

1. 展示规则

a. 内容范围：展示当前管理员账号下所有AI生成的历史作品（图片及视频），作品筛选与输入交互栏的条件强关联——即按输入的提示词/关键词、选中的文件类型及模型进行精准匹配展示，若未输入查询内容则展示该账号下全部历史作品。

b. 基础展示逻辑：遵循前端首页“图片及视频展示规则”（缩略图要求、懒加载、加载状态提示等）。

c. 视频播放逻辑：与前端首页一致（悬停超过0.2秒自动播放、鼠标移出暂停、循环播放）。

d. 排序规则：作品严格按照生成时间倒序排列，最新生成的作品固定展示在最前方；若存在查询条件，排序规则在筛选结果范围内生效，保持最新优先的逻辑

1. 附加操作（可选）

a. 批量操作：鼠标悬停在核心内容区顶部时，显示隐藏的批量操作栏（支持批量下载/删除）；鼠标移开后隐藏，避免视觉杂乱。

b. 单个作品操作：点击作品缩略图弹出与前端首页一致的文件详情弹窗，保留详情展示及下载功能。

c. 作品发布功能：每个作品组件默认不显示发布相关元素；当鼠标hover至作品组件区域时，自动浮现“发布”图标（图标风格与全站简约设计统一，位于组件右下角，不遮挡作品内容）。点击“发布”图标后，系统自动将该作品公开发布至网站中部的公共展示区域，发布完成后图标状态变为“已发布”（可通过颜色或图标样式区分）；发布后的作品支持所有访问网站的用户查看及下载。
> （注：文档部分内容可能由 AI 生成）